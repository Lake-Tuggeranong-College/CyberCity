<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Ghost Note</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <style>
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;line-height:1.4;margin:0;padding:2rem;max-width:900px}
    h1{margin:0 0 1rem 0;font-size:1.8rem}
    .card{border:1px solid #ddd;border-radius:12px;padding:1rem 1.25rem;margin:1rem 0}
    .muted{color:#666}
    .hint{background:#f8f9fa;border-color:#e5e7eb}
    .sr-only{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden}
    .invisible-text{color:transparent;user-select:text}
    .download-hidden{position:absolute;left:-9999px;top:auto}
    code,pre{background:#f6f8fa;padding:.2rem .35rem;border-radius:6px}
    .btn{display:inline-block;padding:.6rem 1rem;border:1px solid #ddd;border-radius:10px;text-decoration:none}
    .btn:hover{background:#f6f8fa}
  </style>

  <!-- Level 1: HTML comment clue -->
  <!-- hidden-text: The flag is CTF{source_sleuth} -->
</head>
<body>
  <h1>Ghost Note</h1>
  <div class="card">
    <p>Sometimes the obvious thing is the one you cannot see. Your tools are stronger than your eyes.</p>
    <ul class="muted" style="margin:.75rem 0 0 1.25rem">
      <li>Try viewing the page source.</li>
      <li>Inspect the elements.</li>
      <li>Select all text.</li>
    </ul>
  </div>

  <div class="card hint">
    <strong>Hint:</strong>
    <p>Not all downloads are visible. Some are quiet. Some are shy.</p>
    <!-- A visible decoy download (harmless) -->
    <a class="btn" id="decoy" href="data:text/plain;charset=utf-8,Nothing%20to%20see%20here." download="readme.txt">Download readme</a>
  </div>

  <!-- Level 2: Offscreen text -->
  <div class="sr-only">CTF{source_sleuth}</div>

  <!-- Level 3: Transparent text (select to reveal) -->
  <p class="invisible-text">CTF{source_sleuth}</p>

  <!-- Level 4: Zero-width stego payload (copy this paragraph and decode ZW chars) -->
  <p aria-hidden="true" style="font-size:0" id="zw"></p>

  <!-- Hidden download: real flag as a file (find via Inspect or tabbing) -->
  <a id="ghost-dl" class="download-hidden" href="#" download="ghost-note.txt">ghost</a>

  <script>
    // ======= CONFIGURE YOUR FLAG HERE =======
    const FLAG = "CTF{source_sleuth}"; // change me
    const FILENAME = "ghost-note.txt";

    // Build zero-width payload (ZWSP for 0, ZWNJ for 1)
    (function encodeZeroWidth(str){
      const map = { "0":"\u200B", "1":"\u200C" }; // ZWSP, ZWNJ
      let bits = "";
      for (const ch of str) bits += ch.codePointAt(0).toString(2).padStart(8,"0");
      let zw = "";
      for (const b of bits) zw += map[b];
      document.getElementById("zw").textContent = zw;
    })(FLAG);

    // Prepare hidden download link with the real flag
    (function prepHiddenDownload(){
      const a = document.getElementById("ghost-dl");
      const blob = new Blob([FLAG + "\n"], { type: "text/plain;charset=utf-8" });
      const url = URL.createObjectURL(blob);
      a.href = url;
      a.setAttribute("download", FILENAME);
      // also expose via keyboard (Tab) without obvious visuals
      a.tabIndex = 0;
      a.title = "ghost";
    })();

    // Optional: keyboard easter egg â€” press g then d to trigger the hidden download
    (function secretHotkey(){
      let seq = "";
      document.addEventListener("keydown", (e)=>{
        seq = (seq + e.key.toLowerCase()).slice(-2);
        if (seq === "gd") {
          document.getElementById("ghost-dl").click();
        }
      });
    })();
  </script>

  <footer class="muted" style="margin-top:2rem">
    <small>Tip: If something looks empty, try selecting it or checking the DOM.</small>
  </footer>
</body>
</html>
